#X3D V3.0 utf8 Titania

META "icon" "../../ui/icons/icon-bw.svg"
META "title" "about:url_error"

DEF None NavigationInfo {
  type [
    "NONE",
    "ANY"
  ]
}

DEF White Background {
  skyColor 1 1 1
}

Transform {
  translation -3.00464 1.23037 0
  children Shape {
    appearance Appearance {
      material Material {
        diffuseColor 0 0 0
      }
    }
    geometry DEF Message Text {
      string [
        "Couldn't load URL 'about:hello_world'.",
        "Couldn't establish connection."
      ]
      fontStyle FontStyle {
        family "TYPEWRITER"
        size 0.3
      }
    }
  }
}

Script {
  initializeOnly SFNode message USE Message

  url "vrmlscript:

function initialize ()
{
	var worldURL = Browser .getWorldURL ()
	//var worldURL = 'file:///home/holger/Projekte/Titania/Titania/share/titania/pages/about/url_error.wrl?what=Couldn%27t%20load%20URL%20%27about%3Ahello_world%27.%0ACouldn%27t%20establish%20connection.'

	var match = worldURL .match (/what=(.*)/)
	var what  = unescape (match [1]) .split ('\\n');

	var string = new MFString ();
	
	for each (var s in what)
		string [string .length] = s;

	message .string = string;
}
	"
}

DEF dialog-error Transform {
  translation -3.70573 1.12522 0
  scale 0.364357 0.364357 5.37931
  children Shape {
    appearance Appearance {
      texture ImageTexture {
        url [
          "../../../../../../../../../usr/share/icons/Faenza/status/96/dialog-error.png",
          "file:///usr/share/icons/Faenza/status/96/dialog-error.png"
        ]
        repeatS FALSE
        repeatT FALSE
      }
    }
    geometry Rectangle2D {
      solid FALSE
    }
  }
}
