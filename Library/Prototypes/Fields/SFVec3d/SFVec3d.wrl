#VRML V2.0 utf8

PROTO SFVec3d [
  exposedField SFVec3d keyValue 0 0 0
  exposedField SFTime  triggerTime 0
  eventOut     SFVec3d value_changed
]
{
  PROTO Fields [
    exposedField SFVec3d keyValue 0 0 0
    exposedField SFTime  triggerTime 0
  ]
  {
    Group { }
  }

  DEF SFVec3d Script {
    eventIn  SFTime  set_triggerTime
    eventOut SFVec3d value_changed IS value_changed
    field    SFNode  fields DEF Fields Fields {
      keyValue IS keyValue
      triggerTime IS triggerTime
    }

    url "vrmlscript:
function initialize ()
{
	if (fields .triggerTime)
		set_triggerTime (0, 0);
}

function set_triggerTime (value, time)
{
	value_changed = fields .keyValue;
}
"
    directOutput TRUE
  }

  ROUTE Fields.triggerTime_changed TO SFVec3d.set_triggerTime
}

