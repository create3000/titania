#VRML V2.0 utf8

PROTO Test [
  exposedField SFBool enabled TRUE
  eventIn      SFBool set_bind
  eventOut     SFBool isBound
  field        SFBool solid FALSE
  exposedField MFNode children [ ]
]
{
  Group { }
}

DEF Above Test { }

DEF Middle Test {
  children DEF Nested Test { }
}

DEF Below Test { }

DEF Script1 Test { }

DEF Script2 Test { }

DEF Scripting Transform {
  children [
    DEF Button1 Transform {
      children [
        DEF Box Transform {
          translation -2 0 0
          children Shape {
            appearance Appearance {
              material DEF Artdeco1 Material {
                ambientIntensity 0.25
                diffuseColor 0.282435 0.0851587 0.134462
                specularColor 0.276305 0.11431 0.139857
                shininess 0.127273
              }
            }
            geometry Box { }
          }
        }
        DEF Touch1 TouchSensor { }
      ]
    }
    DEF Button2 Transform {
      children [
        DEF Box1 Transform {
          translation 2 0 0
          children Shape {
            appearance Appearance {
              material USE Artdeco1
            }
            geometry Box { }
          }
        }
        DEF Touch2 TouchSensor { }
      ]
    }
    DEF RouteScript Script {
      eventIn SFTime addRoute
      eventIn SFTime deleteRoute
      field   SFNode node1 USE Script1
      field   SFNode node2 USE Script2

      url "vrmlscript:
function addRoute ()
{
	Browser .addRoute (node1, 'isBound', node2, 'set_bind');
}

function deleteRoute ()
{
	Browser .deleteRoute (node1, 'isBound', node2, 'set_bind');
}
"
    }
  ]
}

ROUTE Nested.isBound TO Above.set_bind
ROUTE Nested.isBound TO Below.set_bind
ROUTE Nested.enabled_changed TO Nested.set_enabled
ROUTE Touch1.touchTime TO RouteScript.addRoute
ROUTE Touch2.touchTime TO RouteScript.deleteRoute
