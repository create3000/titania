#VRML V2.0 utf8

META "title" "Shader IndexedLineSet"

DEF Axes Transform {
  children Shape {
    geometry IndexedLineSet {
      colorPerVertex FALSE
      colorIndex [
        0,
        1,
        2
      ]
      coordIndex [
        0,
        1,
        -1,
        2,
        3,
        -1,
        4,
        5,
        -1
      ]
      color Color {
        color [
          1 0 0,
          0 1 0,
          0 0 1
        ]
      }
      coord Coordinate {
        point [
          -1 0 0,
          1 0 0,
          0 -1 0,
          0 1 0,
          0 0 -1,
          0 0 1
        ]
      }
    }
  }
}

DEF VertexAttribute Transform {
  children Shape {
    appearance Appearance {
      material Material {
        emissiveColor 0.5 0 0
      }
      shaders DEF Phong ComposedShader {
        language "GLSL"
        parts [
          ShaderPart {
            url "data:text/plain,
#version 120

in vec4 attrib1;
in vec4 attrib2;

void main(void)  
{
	vec4 vertex = gl_Vertex;
	vertex += attrib1;
	vertex += attrib2;

	gl_Position = gl_ModelViewProjectionMatrix * vertex;
}
"
          }
          ShaderPart {
            type "FRAGMENT"
            url "data:text/plain,
#version 120

void main (void)
{
	gl_FragColor = gl_FrontLightModelProduct .sceneColor;
}
"
          }
        ]
      }
    }
    geometry DEF Cube IndexedFaceSet {
      solid FALSE
      colorPerVertex FALSE
      texCoordIndex [
        0,
        1,
        3,
        2,
        -1,
        0,
        1,
        3,
        2,
        -1,
        0,
        1,
        3,
        2,
        -1,
        0,
        1,
        3,
        2,
        -1,
        0,
        1,
        3,
        2,
        -1,
        0,
        1,
        3,
        2,
        -1
      ]
      colorIndex [
        0,
        1,
        2,
        3,
        4,
        5
      ]
      coordIndex [
        0,
        1,
        2,
        3,
        -1
      ]
      attrib [
        FloatVertexAttribute {
          name "attrib1"
          value [
            -1,
            0,
            0,
            0
          ]
        }
        FloatVertexAttribute {
          name "attrib2"
          value [
            0,
            -1,
            0,
            0
          ]
        }
      ]
      coord Coordinate {
        point [
          -1 -1 0,
          1 -1 0,
          1 1 0,
          -1 1 0
        ]
      }
    }
  }
}
